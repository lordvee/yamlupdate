(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var a=r(5155),l=r(2115),n=r(534);let s="^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",i=/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,o={fqdn:{type:"text",placeholder:"Enter FQDN",required:!0,regex:i,allowedCharacters:RegExp("[a-zA-Z0-9.]")},applicationGroup:{type:"text",placeholder:"Enter Application Group",required:!1,textCase:"unchanged"},adminState:{type:"bool",required:!1,advanced:!0},virtualAddress:{type:"text",placeholder:"Enter Virtual Address",required:!0,regex:s,notes:"match ip regex",allowedCharacters:/^[0-9.]*$/},virtualPort:{type:"integer",placeholder:"Enter Virtual Port",required:!0,min:0,max:65535},defaultPool:{type:"select",placeholder:"Enter Default Pool",options:"pools",required:!1,advanced:!0},trafficGroup:{type:"select",options:{"Traffic Group 1 ":"traffic-group-1","Traffic Group 2 ":"traffic-group-2","Traffic Group 3 ":"traffic-group-3"},placeholder:"Enter Default Pool",required:!1,notes:""},persistenceMethod:{type:"select",options:{cookie_unencrypted:"cookie_unencrypted",srcaddr_180:"srcaddr_180",srcaddr_300:"srcaddr_300",srcaddr_600:"srcaddr_600",srcaddr_1800:"srcaddr_1800",srcaddr_3600:"srcaddr_3600",disabled:"disabled"},required:!1,default:"srcaddr_180"},profileL4:{type:"select",options:{300:"300",600:"600"},required:!1,default:"300",note:"Only FastL4",template:["fastl4"]},remark:{type:"text",placeholder:"Enter Remark",required:!1,maxLength:64,advanced:!0},profileTCP:{type:"select",options:{300:"300",900:"900",immediate:"immediate"},required:!1,default:"300",note:"Only for TCP",template:["http","https","waf"]},profileHTTP:{type:"select",options:{standard:"standard",decrypted:"decrypted",hsts:"hsts",xff:"xff"},required:!1,default:"standard",note:"Only for HTTP/HTTPS",template:["http","https","waf"]},profileTLS:{type:"select",options:{full:"full",offload:"offload"},required:!1,note:"Only for template=[https,waf]",template:["https","waf"]},policyWAF:{type:"select",options:{custom:"custom",transparent:"transparent",enforced:"enforced"},required:!1,note:"Only for template=[waf]",template:["waf"]},pools:{type:"array",options:{name:{type:"text",placeholder:"Enter Pool Name",required:!0},loadBalancingMode:{type:"select",options:{roundRobin:"round-robin",ratioMember:"ratio-member",leastConnection:"least-connection-member"},placeholder:"Enter Load Balancing Mode",required:!1,advanced:!0},remark:{type:"text",placeholder:"Enter Remark",required:!1,maxLength:64,advanced:!0},monitor:{type:"object",options:{type:{type:"select",placeholder:"Enter Monitor Type",options:{http:"http",tcp:"tcp",udp:"udp",icmp:"icmp"},required:!1},receive:{type:"text",placeholder:"Enter Receive",required:!1},receiveDown:{type:"text",placeholder:"Enter Receive Down",required:!1,advanced:!0},send:{type:"text",placeholder:"Enter Send",required:!1},targetPort:{type:"integer",placeholder:"Enter Target Port",required:!1,min:0,max:65535},timeUntilUp:{type:"integer",placeholder:"Enter Time Until Up",required:!1,advanced:!0,min:0,max:1800}}},members:{type:"array",options:{hostname:{type:"text",placeholder:"Enter Server Address",required:!0,regex:i,notes:"match hostname regex"},adminState:{type:"select",options:{enable:"enable",disable:"disable",offline:"offline"},required:!1},priorityGroup:{type:"integer",placeholder:"Enter Priority Group",required:!1,min:0,max:65535,advanced:!0},ratio:{type:"integer",placeholder:"Enter Ratio",required:!1,min:1,max:100,advanced:!0},serverAddress:{type:"text",placeholder:"Enter Server Address",required:!0,regex:s,notes:"match ip regex"},servicePort:{type:"integer",placeholder:"Enter Server Port",required:!0,min:0,max:65535}}}}}};var c=r(7489),d=r(3578);let u=e=>{switch(e){case"error":return"red-500";case"warning":return"yellow-500";case"success":return"green-500";case"info":return"blue-500";default:return"gray-500"}},p=e=>{let{severity:t,message:r}=e,[n,s]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{s(!0);let e=setTimeout(()=>{s(!1)},1e5);return()=>clearTimeout(e)},[]),!n)return null;let i=u(t);return(0,a.jsx)("div",{className:"fixed top-4 right-4 bg-".concat(i," border-white border-1 text-white p-1 px-4 font-bold rounded-md shadow-lg z-50 animate-bounce"),style:{animationIterationCount:1},children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:r}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"ml-4 text-2xl cursor-pointer px-1 hover:bg-white hover:text-".concat(i," rounded-sm"),children:"\xd7"})]})})},m=e=>{let t,{key:r,config:l,formData:n,handleChange:s,configValues:i={advanced:!1},newElement:o=null}=e,{type:c,min:d,max:u,options:p,regex:h,advanced:v,allowedCharacters:N,textCase:w,...k}=l;if(v&&!i.advanced)return null;switch(c){case"text":t=x;break;case"select":t=g;break;case"array":t=f;break;case"integer":t=y;break;case"bool":t=j;break;case"calculated":t=b;break;case"object":return(0,a.jsxs)("div",{className:"ml-8 mt-8 flex flex-col gap-2 bg-gray-900 p-4 rounded-md",children:[(0,a.jsxs)("label",{className:"font-bold",children:[r," configuration:"]}),Object.entries(p).map(e=>{let[t,a]=e;return m({key:"".concat(r,".").concat(t),config:a,formData:n,handleChange:s,configValues:i,newElement:o?o[r]:null})})]},r);default:return null}return(0,a.jsx)(t,{textCase:w,className:"grid grid-cols-1 items-center",label:r.split(".").pop(),value:o?o[r.split(".").pop()]:n&&n[r]?n[r]:"",onChange:e=>s(r,e),min:d,max:u,options:p,formData:n,regex:h,allowedCharacters:N,configValues:i,...k},r)},x=e=>{let{label:t,value:r="",onChange:n,regex:s,required:i,textCase:o,allowedCharacters:c}=e,[d,u]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"grid grid-cols-2 items-center",children:[(0,a.jsxs)("label",{children:[t,i&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),": "]}),(0,a.jsx)("input",{type:"text",className:"border m-4 bg-gray-100 text-black rounded-md py-1 pl-2",value:r,onChange:e=>{let t="unchanged"===o?e.target.value:e.target.value.toLowerCase();e.target.value=t,!c||c.test(t)?(n(e),u(!1)):u(!0)}}),d&&(0,a.jsx)(p,{severity:"error",message:"Invalid value"})]})},g=e=>{let{label:t,options:r,value:l="",onChange:n,required:s,formData:i}=e,o=r;return"string"==typeof r&&i&&(o=i[r]&&i[r].length>0?i[r].reduce((e,t)=>(e[t.name]=t.name,e),{}):{"No pools. First configure a pool":""}),(0,a.jsxs)("div",{className:"grid grid-cols-2 items-center",children:[(0,a.jsxs)("label",{children:[t,s&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,a.jsxs)("select",{value:l,onChange:n,className:"border m-4 bg-gray-100 text-black rounded-md py-1",children:[(0,a.jsx)("option",{value:"",disabled:!0,className:"text-gray-400 italic",children:"Select an option"}),Object.keys(o).map(e=>(0,a.jsx)("option",{value:o[e],disabled:!o[e],className:"border m-4 bg-gray-100 rounded-md text-black",children:e},e))]})]})},h=e=>{let{content:t,onEdit:r,onRemove:l}=e;return(0,a.jsxs)("div",{className:"border-blue-500 border-2  px-4 py-1 rounded-full mb-1 mx-1 cursor-pointer flex justify-between items-center text-sm hover:bg-blue-700",children:[(0,a.jsxs)("div",{className:"px-1",onClick:r,children:[t.adminState?(0,a.jsx)(c.g,{icon:d.GEE,className:"enable"===t.adminState?"text-green-500":"offline"===t.adminState?"text-gray-400":"text-red-500"}):""," "," ",t.name?t.name:"".concat(t.serverAddress,":").concat(t.servicePort)]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"text-white w-6 h-6 flex items-center justify-center cursor-pointer",children:(0,a.jsx)(c.g,{icon:d.MT7})}),(0,a.jsx)("button",{type:"button",onClick:l,className:"text-white w-6 h-6 flex items-center justify-center cursor-pointer",children:(0,a.jsx)(c.g,{icon:d.yLS})})]})]})},f=e=>{let{label:t,value:r=[],onChange:n,options:s,required:i,configValues:o}=e,[u,x]=(0,l.useState)(r),[g,f]=(0,l.useState)(!1),[b,y]=(0,l.useState)({}),[j,v]=(0,l.useState)(null),[N,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{x(r)},[r]);let k=e=>Object.keys(e).reduce((t,r)=>("object"===e[r].type?t[r]=k(e[r].options):t[r]="",t),{}),C=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=[];return Object.entries(t).forEach(t=>{let[l,n]=t,s=r?"".concat(r,".").concat(l):l;n.required&&("object"===n.type?a.push(...C(e[l]||{},n.options,s)):e[l]&&""!==e[l].toString().trim()||a.push("".concat(s," is required")))}),a},q=e=>{y(u[e]),v(e),f(!0),w([])},E=e=>{let t=u.filter((t,r)=>r!==e);x(t),n({target:{value:t,isArray:!0}})},S=(e,t)=>{let r=t.target?t.target.value:t;y(t=>{let a={...t},l=e.split("."),n=a;for(let e=0;e<l.length-1;e++)n[l[e]]||(n[l[e]]={}),n=n[l[e]];return n[l[l.length-1]]=r,a})};return(0,a.jsxs)("div",{className:"grid grid-cols-2 items-center p-1 rounded-md",children:[(0,a.jsxs)("label",{children:[t,i&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,a.jsxs)("div",{className:"flex flex-row w-[400px]",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{f(!0),y(k(s)),v(null),w([])},className:"bg-green-500 hover:bg-green-600 text-white p-1 px-4 rounded m-1 cursor-pointer shrink-0",children:[(0,a.jsx)(c.g,{icon:d.QLR})," Add"]}),(0,a.jsx)("div",{className:"flex flex-row gap-1",children:u.length>0&&u.map((e,t)=>(0,a.jsx)(h,{content:e,onEdit:()=>q(t),onRemove:()=>E(t)},t))})]}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500/50 flex justify-center items-center",children:(0,a.jsxs)("div",{className:"bg-black text-white p-4 rounded-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("h2",{className:"text-white font-bold text-lg",children:[(0,a.jsx)("span",{className:"text-green-500",children:t})," configuration"]}),N.length>0&&(0,a.jsx)(p,{severity:"error",message:N.map(e=>"â€¢ ".concat(e)).join("\n")}),Object.entries(s).map(e=>{let[t,r]=e;return m({key:t,config:r,values:u,handleChange:S,configValues:o,newElement:b})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{f(!1),y({}),v(null),w([])},className:"bg-gray-500 text-white p-2 rounded cursor-pointer",children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=C(b,s);if(e.length>0)return void w(e);let t=[...u];null!==j?t[j]=b:t.unshift(b),x(t),n({target:{value:t,isArray:!0}}),f(!1),y({}),v(null),w([])},className:"bg-blue-500 text-white p-2 rounded cursor-pointer",children:"Done"})]})]})})]})},b=e=>{let{label:t,value:r="",onChange:l,field:n,formData:s,options:i,required:o}=e,c=s&&s[n]&&Array.isArray(s[n])?s[n].reduce((e,t)=>(e[t.name]=t.name,e),{}):{["No ".concat(n," entered")]:"No options"};return console.log("formData:",s),console.log("field:",n),console.log("formData[field]:",s[n]),(0,a.jsx)(g,{label:t,options:c,value:s[n][s[n].length-1].name,onChange:e=>{l({target:{value:e.target.value}})},required:o})},y=e=>{let{label:t,value:r="",onChange:l,min:n,max:s,required:i}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-2 items-center",children:[(0,a.jsxs)("label",{children:[t,i&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),":"]}),(0,a.jsx)("input",{type:"number",value:r,onChange:e=>{let t=e.target.value;(""===t||Number(t)>=n&&Number(t)<=s)&&l({target:{value:t}})},min:n,max:s,className:"border m-4 bg-gray-100 text-black rounded-md py-1"})]})},j=e=>{let{label:t,value:r=!1,onChange:l,required:n}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"mr-4",children:[t,n&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),": "]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:e=>{l({target:{value:e.target.checked}})},className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})},v=e=>""===e||null==e;function N(e){let{configValues:t}=e,[r,s]=(0,l.useState)({}),[i,u]=(0,l.useState)(""),[x,g]=(0,l.useState)(!1),[h,f]=(0,l.useState)([]),[b,y]=(0,l.useState)(!1),j=(e,t)=>{s(r=>(t.target&&t.target.isArray,{...r,[e]:t.target.value}))},N=e=>{if(Array.isArray(e))return e.map(e=>N(e)).filter(e=>null!=e&&""!==e);if(e&&"object"==typeof e){let t={};for(let[r,a]of Object.entries(e)){let e=N(a);null!=e&&""!==e&&(t[r]=e)}return Object.keys(t).length>0?t:null}return""===e?null:e};return(0,a.jsxs)("form",{className:"flex flex-col gap-1",onSubmit:e=>{e.preventDefault(),y(!0),f([]);let t=Object.entries(o).filter(e=>{let[t,a]=e;return a.required&&(!r[t]||""===r[t].trim())});if(t.length>0)return void f(t.map(e=>{let[t]=e;return(0,a.jsxs)("span",{children:["".concat(t),(0,a.jsx)("span",{className:"font-normal",children:" is required."})]})}));let l=Object.entries(r).filter(e=>{let[t,r]=e,a=o[t],l="string"==typeof a.regex?new RegExp(a.regex):a.regex;return!v(r)&&a.regex&&!l.test(r)});if(l.length>0)return void f(l.map(e=>{let[t]=e;return"".concat(t," is not a valid value.")}));let s=N(r);u(n.Ay.dump(s)),g(!0),y(!1)},children:[h.length>0&&b&&(0,a.jsx)(p,{severity:"error",message:h.map(e=>(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(c.g,{icon:d.dmS})," ",e]},JSON.stringify(e)))},Date.now()),x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{severity:"success",message:"Yaml generated successfully"}),(0,a.jsx)("textarea",{readOnly:!0,value:i,className:"border p-4 m-4 bg-gray-100 text-black min-h-40 rounded-md font-mono",cols:"100",rows:"15"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(i).then(()=>{alert("YAML content copied to clipboard!")}).catch(e=>{console.error("Failed to copy: ",e)})},className:"bg-green-500 text-white p-2 rounded cursor-pointer",children:[(0,a.jsx)(c.g,{icon:d.jPR}),(0,a.jsx)("span",{className:"ml-2",children:"Copy to Clipboard"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{g(!1)},className:"bg-gray-500 text-white p-2 rounded cursor-pointer",children:[(0,a.jsx)(c.g,{icon:d.U23}),(0,a.jsx)("span",{className:"ml-2",children:"Back to Configuration"})]})]}):(0,a.jsxs)(a.Fragment,{children:[Object.entries(o).filter(e=>{let[r,a]=e;return!a.advanced||a.advanced&&t.advanced}).filter(e=>{let[r,a]=e;return!a.template||a.template&&a.template.includes(t.template)}).map(e=>{let[a,l]=e;return m({key:a,config:l,configValues:t,formData:r,handleChange:j})}),(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 flex gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{s({}),u(""),g(!1),f([]),y(!1)},className:"bg-gray-500 hover:bg-gray-700 text-white p-2 px-4 rounded cursor-pointer text-lg font-bold z-50",children:[(0,a.jsx)(c.g,{icon:d.BF2}),(0,a.jsx)("span",{className:"ml-2",children:"Reset Form"})]}),(0,a.jsxs)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white p-2 px-4 rounded cursor-pointer text-lg font-bold z-50",children:[(0,a.jsx)(c.g,{icon:d.ruc}),(0,a.jsx)("span",{className:"ml-2",children:"Generate YAML"})]})]})]})]})}function w(e){let{configValues:t,setConfigValues:r}=e,[n,s]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"relative inline-block text-left pl-2",children:[(0,a.jsx)("button",{onClick:()=>{s(!n)},className:"bg-gray-800 text-white p-2 rounded-full hover:bg-gray-700 cursor-pointer",children:(0,a.jsx)(c.g,{icon:d.dB})}),n&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white text-black ring-1 ring-black ring-opacity-5",children:(0,a.jsxs)("div",{className:"py-1 m-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[(0,a.jsx)(j,{label:"Advanced options",value:t.advanced,onChange:e=>r({...t,advanced:!t.advanced})}),(0,a.jsx)(g,{label:"Template",options:{fastl4:"fastl4",http:"http",https:"https",waf:"waf"},value:t.template,onChange:e=>r({...t,template:e.target.value})})]})})]})}function k(){let[e,t]=(0,l.useState)({advanced:!1,template:"fastl4"});return(0,a.jsx)("div",{className:"grid items-left justify-items-left p-1 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:(0,a.jsxs)("main",{children:[(0,a.jsxs)("div",{className:"flex flex-row justify-items-start align-center items-center sm:items-start",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"NLB Automation"}),(0,a.jsx)(w,{configValues:e,setConfigValues:t})]}),(0,a.jsx)("div",{className:"flex flex-row justify-items-start align-center items-center sm:items-start",children:(0,a.jsx)(N,{configValues:e})})]})})}},9443:(e,t,r)=>{Promise.resolve().then(r.bind(r,4369))}},e=>{var t=t=>e(e.s=t);e.O(0,[266,806,441,684,358],()=>t(9443)),_N_E=e.O()}]);